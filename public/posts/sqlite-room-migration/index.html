<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Migrating existing SQLite implementation to Room | Amit Bhandari</title>
<meta name=keywords content="Android,Room,Architecture Components,Java"><meta name=description content="Everything you need to know about migrating existing SQLlite to Room database."><meta name=author content="Amit Bhandari"><link rel=canonical href=http://localhost:1313/posts/sqlite-room-migration/><link crossorigin=anonymous href=/assets/css/stylesheet.6bffd7a4097c0279f26b1781d82b385208248a19c1bd3579693cc195b019686b.css integrity="sha256-a//XpAl8AnnyaxeB2Cs4UggkihnBvTV5aTzBlbAZaGs=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Migrating existing SQLite implementation to Room"><meta property="og:description" content="Everything you need to know about migrating existing SQLlite to Room database."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/sqlite-room-migration/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-07-14T11:58:59+05:30"><meta property="article:modified_time" content="2017-07-14T11:58:59+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Migrating existing SQLite implementation to Room"><meta name=twitter:description content="Everything you need to know about migrating existing SQLlite to Room database."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Migrating existing SQLite implementation to Room","item":"http://localhost:1313/posts/sqlite-room-migration/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Migrating existing SQLite implementation to Room","name":"Migrating existing SQLite implementation to Room","description":"Everything you need to know about migrating existing SQLlite to Room database.","keywords":["Android","Room","Architecture Components","Java"],"articleBody":"Room is a persistence library introduce by Google in this year I/0. Room makes it extremely easy to work with SQLite in your android application and worth giving a shot if you are using SQLiteOpenHelper as of now for handling data in your app. Migrating your current implementation to Room is, surprisingly, very easy. Google has provided samples for this here, but I personally think it’s too much code for such simple task and it can be explained easily. I explain below few simple steps for migrating your current implementation to Room DB and I hope you will find it helpful, if you do, share it and let other people know about it.\nSQLiteOpenHelper implementation: SQLiteOpenHelper is a helper class which manages database creation and version management. All the CRUD operations of database we have to implement by sub classing SQLiteOpenHelper. You can find more info about how it is done here. We will migrate user database currently implemented using SQLiteOpenHelper. Current implementation looks like this.\npublic class User { private int uId; private String uName; private String uContact; public User() { } public User(int id, String name, String number){ this.uId = id; this.uName = name; this.uContact= number; }; //getters setters left out for brevity } All the users we have to store in SQLite db and for that we will use helper class UserDbHelper sub classed from SQLiteOpenHelper.\npublic class UserDbHelper extends SQLiteOpenHelper { private static final int DATABASE_VERSION = 1; // Database Name private static final String DATABASE_NAME = \"userDB\"; // user table name private static final String TABLE_USERS = \"users\"; // user Table Columns names private static final String USER_ID = \"user_id\"; private static final String USER_NAME = \"user_name\"; private static final String USER_PH_NO = \"user_contact\"; public UserDbHelper(Context context) { super(context, DATABASE_NAME, null, DATABASE_VERSION); } @Override public void onCreate(SQLiteDatabase db) { //create the table if not yet created String CREATE_USER_TABLE = \"CREATE TABLE \" + TABLE_USERS + \"(\" + USER_ID + \" INTEGER PRIMARY KEY,\" + USER_NAME + \" TEXT,\" + USER_PH_NO + \" TEXT\" + \")\"; db.execSQL(CREATE_USER_TABLE); } @Override public void onUpgrade(SQLiteDatabase db, int i, int i1) { // Drop older table if existed db.execSQL(\"DROP TABLE IF EXISTS \" + TABLE_USERS); // Create tables again onCreate(db); } public void addUser(User user){ //Add new user to database SQLiteDatabase db = this.getWritableDatabase(); ContentValues values = new ContentValues(); values.put(USER_NAME, user.getUName()); // Contact Name values.put(USER_PH_NO, user.getUContact()); // Contact Phone values.put(USER_ID, user.getUId()); // Inserting Row db.insert(TABLE_USERS, null, values); db.close(); // Closing database connection } public User getUser(int id){ SQLiteDatabase db = this.getReadableDatabase(); Cursor cursor = db.query(TABLE_USERS, new String[] { USER_ID, USER_NAME, USER_PH_NO }, USER_ID + \"=?\", new String[] { String.valueOf(id) }, null, null, null, null); if (cursor != null) cursor.moveToFirst(); User contact = new User(Integer.parseInt(cursor.getString(0)), cursor.getString(1), cursor.getString(2)); return contact; } } Now we can add users to database like this.\n//get database instance UserDbHelper userDbHelper = new UserDbHelper(this); //add couple of users userDbHelper.addUser(new User(1,\"Hulk\",\"11-445-9999\")); userDbHelper.addUser(new User(2,\"Dominic\",\"11-445-9999\")); And fetch the users using this. User extractedUser = userDbHelper.getUser(1);\nAs you can see, we have to write queries to put and fetch data in table ourselves using ContentValues and cursors. This kind of code is highly prone to errors and errors can be difficult to find as well. Also there is not compile time check involved in above implementation which can produce potential runtime errors and termination.\nRoom helps you achieve database abstraction through Data Access Objects and also provides compile time query checks so as to minimize potential runtime failures. Win win for developers!\nMigrating to Room: I assume that at this point, you know the basics of how Room works and have tried it out. If not, I would recommend you go through this tutorial to get started. For migrating our current implementation of users database, we will update our POJO class first. Lets add @Entity annotations to User class as this class will be mapped to table in our database. It is mandatory to define at least one primary field in Room.\n@Entity public class User { @PrimaryKey private int uId; private String uName; private String uNumber; public User() { } @Ignore public User(int id, String name, String number){ this.uId = id; this.uName = name; this.uNumber= number; }; //add all the getters and setters here } Let’s create Data Access Object (DAO) for exposing methods which will be used by application for accessing the data back and forth from database. Our DAO implementation will be very easy, it will only be 2 method, one to add user to database and one to read all users from database.\n@Dao public interface UserDAO { @Insert(onConflict = REPLACE) void insertUser(User user); @Query(\"SELECT * FROM User\") List\u003cUser\u003e getUsers(); } As you can see above, how simple implementation we provided for Data Access Object. Compare it with the methods we used in SQLiteOpenHelper class for carrying out same operations. For adding, updating or deleting row(s) in table, we don’t even have to form queries, Room will do it for us. Only for reading data, we need to use @Query annotation and provide it with query unlike SQLiteHelper where we have to deal with cursors and all of boiler plate code. Remember, more the code, more the bugs!\nWe will get DAO object instance from RoomDatabase class. RoomDatabase class will be the abstract class with only one method as shown below. We have to mention version number for DB in this class. As we are migrating Database from SQLiteHelper to Room, version number needs to be more than SQLiteHelper db version number. We have used version 1 for our SQLiteHelper Database, so we will user version 2 for Room.\n@Database (entities = {User.class},version = 2) public abstract class UserDB extends RoomDatabase { public abstract UserDAO userDAO(); } And we are done with our Room Database implementation and its time to see it in action. While creating RoomDatabase, we have to provide migration information which we will see in next part.\nWe need Migration class instance while building Room Database from database builder. Migration class constructor takes 2 versions as parameter, one is the version from which it needs to migrate (version 1 in our case) and second is the version to which it is going to migrate (version 2 in our case). It provides one method migrate(SupportSQLiteDatabase db). SupportSQLiteDatabase which is called by Room while migrating the Database with db instance as parameter. Here is the place where we can make changes (if any) to db schema or db data. If we do not want to make any changes, and just want to migrate, we leave the implementation empty. This is how we create Room Database.\nfinal Migration MIGRATION_1_2 = new Migration(1, 2) { @Override public void migrate(SupportSQLiteDatabase database) { // Since we didn't alter the table, there's nothing else to do here. } }; //create db final UserDB userDB = Room.databaseBuilder(this , UserDB.class , \"userDB\") .addMigrations(MIGRATION_1_2) .build(); //inserting and accessing data using DAO //this operations needs to be performed on thread other than main thread userDB.userDAO().insertUser(new User123(5,\"Wowman\", \"888888888\")); userDB.userDAO().insertUser(new User123(6,\"Captain\", \"888888888\")); User user = userDB.userDAO().getUsers().get(0); And that is pretty much it. We are done with our changes and executing this will migrate our db successfully to room.\nYou can get the source code mentioned here on my Github here.\nBut while migrating db, you need to make sure of couple things, otherwise you may face issues.\nYou have to make sure column names mentioned in SQLiteHelper class and your POJO class should match, otherwise migration will not be successful. For e.g. suppose column name for id field of user is ‘user_id’ in SQLite open helper class, either you have to name your id variable in POJO class ‘user_id’ or explicitly mention column name of id field by using @ColumnInfo annotation like this @ColumnInfoname(name=\"user_id\") private int uId; You have to make sure that table names also matches. By default, room will assign table name as name of entity class (‘user’ in our case), but we can change this by mentioning table name while annotating entity class like this @Entity( tableName = “users” ) This article was originally written on medium here\n","wordCount":"1344","inLanguage":"en","datePublished":"2017-07-14T11:58:59+05:30","dateModified":"2017-07-14T11:58:59+05:30","author":{"@type":"Person","name":"Amit Bhandari"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/sqlite-room-migration/"},"publisher":{"@type":"Organization","name":"Amit Bhandari","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Amit Bhandari (Alt + H)">Amit Bhandari</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/archives/ title=Archives><span>Archives</span></a></li><li><a href="https://docs.google.com/document/d/1MORtouBEh73fB4GKWPjOEz4V5QeBQitM_DC_U223agM/edit?usp=sharing" title=Resume><span>Resume</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Migrating existing SQLite implementation to Room</h1><div class=post-description>Everything you need to know about migrating existing SQLlite to Room database.</div><div class=post-meta><span title='2017-07-14 11:58:59 +0530 IST'>July 14, 2017</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Amit Bhandari</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#sqliteopenhelper-implementation aria-label="SQLiteOpenHelper implementation:">SQLiteOpenHelper implementation:</a></li><li><a href=#migrating-to-room aria-label="Migrating to Room:">Migrating to Room:</a></li></ul></div></details></div><div class=post-content><p><a href=https://developer.android.com/topic/libraries/architecture/room.html>Room</a> is a persistence library introduce by Google in this year I/0.
Room makes it extremely easy to work with SQLite in your android application and worth giving a shot if you are using SQLiteOpenHelper as of now for handling data in your app.
Migrating your current implementation to Room is, surprisingly, very easy.
Google has provided samples for this here, but I personally think it’s too much code for such simple task and it can be explained easily.
I explain below few simple steps for migrating your current implementation to Room DB and I hope you will find it helpful, if you do, share it and let other people know about it.</p><hr><h2 id=sqliteopenhelper-implementation>SQLiteOpenHelper implementation:<a hidden class=anchor aria-hidden=true href=#sqliteopenhelper-implementation>#</a></h2><p><a href=https://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html>SQLiteOpenHelper</a> is a helper class which manages database creation and version management.
All the CRUD operations of database we have to implement by sub classing SQLiteOpenHelper.
You can find more info about how it is done here.
We will migrate user database currently implemented using SQLiteOpenHelper. Current implementation looks like this.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>User</span><span class=w>  </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>uId</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>uName</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>uContact</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=nf>User</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=nf>User</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=na>uId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=na>uName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=na>uContact</span><span class=o>=</span><span class=w> </span><span class=n>number</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//getters setters left out for brevity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div><p>All the users we have to store in SQLite db and for that we will use helper class UserDbHelper sub classed from SQLiteOpenHelper.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserDbHelper</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>SQLiteOpenHelper</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>DATABASE_VERSION</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>// Database Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>DATABASE_NAME</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;userDB&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>// user table name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>TABLE_USERS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;users&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>// user Table Columns names</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>USER_ID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;user_id&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>USER_NAME</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;user_name&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>USER_PH_NO</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;user_contact&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=nf>UserDbHelper</span><span class=p>(</span><span class=n>Context</span><span class=w> </span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>super</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=n>DATABASE_NAME</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=n>DATABASE_VERSION</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>onCreate</span><span class=p>(</span><span class=n>SQLiteDatabase</span><span class=w> </span><span class=n>db</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c1>//create the table if not yet created</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>String</span><span class=w> </span><span class=n>CREATE_USER_TABLE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;CREATE TABLE &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>TABLE_USERS</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;(&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=o>+</span><span class=w> </span><span class=n>USER_ID</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; INTEGER PRIMARY KEY,&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>USER_NAME</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; TEXT,&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=o>+</span><span class=w> </span><span class=n>USER_PH_NO</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; TEXT&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;)&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>db</span><span class=p>.</span><span class=na>execSQL</span><span class=p>(</span><span class=n>CREATE_USER_TABLE</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>onUpgrade</span><span class=p>(</span><span class=n>SQLiteDatabase</span><span class=w> </span><span class=n>db</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>i1</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c1>// Drop older table if existed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>db</span><span class=p>.</span><span class=na>execSQL</span><span class=p>(</span><span class=s>&#34;DROP TABLE IF EXISTS &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>TABLE_USERS</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c1>// Create tables again</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>onCreate</span><span class=p>(</span><span class=n>db</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>addUser</span><span class=p>(</span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c1>//Add new user to database</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>SQLiteDatabase</span><span class=w> </span><span class=n>db</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>getWritableDatabase</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>ContentValues</span><span class=w> </span><span class=n>values</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ContentValues</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>values</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>USER_NAME</span><span class=p>,</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=na>getUName</span><span class=p>());</span><span class=w> </span><span class=c1>// Contact Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>values</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>USER_PH_NO</span><span class=p>,</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=na>getUContact</span><span class=p>());</span><span class=w> </span><span class=c1>// Contact Phone</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>values</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>USER_ID</span><span class=p>,</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=na>getUId</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c1>// Inserting Row</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>db</span><span class=p>.</span><span class=na>insert</span><span class=p>(</span><span class=n>TABLE_USERS</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=n>values</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>db</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w> </span><span class=c1>// Closing database connection</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=n>User</span><span class=w> </span><span class=nf>getUser</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>SQLiteDatabase</span><span class=w> </span><span class=n>db</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>getReadableDatabase</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>Cursor</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>db</span><span class=p>.</span><span class=na>query</span><span class=p>(</span><span class=n>TABLE_USERS</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>USER_ID</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>USER_NAME</span><span class=p>,</span><span class=w> </span><span class=n>USER_PH_NO</span><span class=w> </span><span class=p>},</span><span class=w> </span><span class=n>USER_ID</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;=?&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>new</span><span class=w> </span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=p>},</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>cursor</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>cursor</span><span class=p>.</span><span class=na>moveToFirst</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>User</span><span class=w> </span><span class=n>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=n>Integer</span><span class=p>.</span><span class=na>parseInt</span><span class=p>(</span><span class=n>cursor</span><span class=p>.</span><span class=na>getString</span><span class=p>(</span><span class=n>0</span><span class=p>)),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>cursor</span><span class=p>.</span><span class=na>getString</span><span class=p>(</span><span class=n>1</span><span class=p>),</span><span class=w> </span><span class=n>cursor</span><span class=p>.</span><span class=na>getString</span><span class=p>(</span><span class=n>2</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>return</span><span class=w> </span><span class=n>contact</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div><p>Now we can add users to database like this.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//get database instance</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>UserDbHelper</span><span class=w> </span><span class=n>userDbHelper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>UserDbHelper</span><span class=p>(</span><span class=k>this</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//add couple of users</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>userDbHelper</span><span class=p>.</span><span class=na>addUser</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=s>&#34;Hulk&#34;</span><span class=p>,</span><span class=s>&#34;11-445-9999&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>userDbHelper</span><span class=p>.</span><span class=na>addUser</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=n>2</span><span class=p>,</span><span class=s>&#34;Dominic&#34;</span><span class=p>,</span><span class=s>&#34;11-445-9999&#34;</span><span class=p>));</span></span></span></code></pre></div><p>And fetch the users using this.<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>User</span><span class=w> </span><span class=n>extractedUser</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>userDbHelper</span><span class=p>.</span><span class=na>getUser</span><span class=p>(</span><span class=n>1</span><span class=p>);</span></span></span></code></pre></div></p><p><em>As you can see, we have to write queries to put and fetch data in table ourselves using ContentValues and cursors.
This kind of code is highly prone to errors and errors can be difficult to find as well.
Also there is not compile time check involved in above implementation which can produce potential runtime errors and termination.</em></p><p>Room helps you achieve database abstraction through Data Access Objects and also provides compile time query checks so as to minimize potential runtime failures.
Win win for developers!</p><hr><h2 id=migrating-to-room>Migrating to Room:<a hidden class=anchor aria-hidden=true href=#migrating-to-room>#</a></h2><p>I assume that at this point, you know the basics of how Room works and have tried it out.
If not, I would recommend you go through this tutorial to get started.
For migrating our current implementation of users database, we will update our POJO class first.
Lets add @Entity annotations to User class as this class will be mapped to table in our database.
It is mandatory to define at least one primary field in Room.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>User</span><span class=w>  </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@PrimaryKey</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>uId</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>uName</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>uNumber</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=nf>User</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@Ignore</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=nf>User</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=na>uId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=na>uName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=na>uNumber</span><span class=o>=</span><span class=w> </span><span class=n>number</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//add all the getters and setters here</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div><p>Let’s create Data Access Object (DAO) for exposing methods which will be used by application for accessing the data back and forth from database.
Our DAO implementation will be very easy, it will only be 2 method, one to add user to database and one to read all users from database.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Dao</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>UserDAO</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@Insert</span><span class=p>(</span><span class=n>onConflict</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>REPLACE</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kt>void</span><span class=w> </span><span class=nf>insertUser</span><span class=p>(</span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@Query</span><span class=p>(</span><span class=s>&#34;SELECT * FROM User&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>List</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getUsers</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div><p>As you can see above, how simple implementation we provided for Data Access Object.
Compare it with the methods we used in SQLiteOpenHelper class for carrying out same operations.
For adding, updating or deleting row(s) in table, we don’t even have to form queries, Room will do it for us.
Only for reading data, we need to use @Query annotation and provide it with query unlike SQLiteHelper where we have to deal with cursors and all of boiler plate code.
Remember, more the code, more the bugs!</p><p>We will get DAO object instance from RoomDatabase class.
RoomDatabase class will be the abstract class with only one method as shown below.
We have to mention version number for DB in this class.
As we are migrating Database from SQLiteHelper to Room, version number needs to be more than SQLiteHelper db version number.
We have used version 1 for our SQLiteHelper Database, so we will user version 2 for Room.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Database</span><span class=w> </span><span class=p>(</span><span class=n>entities</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>User</span><span class=p>.</span><span class=na>class</span><span class=p>},</span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>2</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserDB</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>RoomDatabase</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=n>UserDAO</span><span class=w> </span><span class=nf>userDAO</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div><p>And we are done with our Room Database implementation and its time to see it in action.
While creating RoomDatabase, we have to provide migration information which we will see in next part.</p><hr><p>We need <em>Migration</em> class instance while building Room Database from database builder.
Migration class constructor takes 2 versions as parameter, one is the version from which it needs to migrate (version 1 in our case) and second is the version to which it is going to migrate (version 2 in our case).
It provides one method migrate(SupportSQLiteDatabase db). <a href=https://developer.android.com/reference/android/arch/persistence/db/SupportSQLiteDatabase.html>SupportSQLiteDatabase</a> which is called by Room while migrating the Database with db instance as parameter.
Here is the place where we can make changes (if any) to db schema or db data.
If we do not want to make any changes, and just want to migrate, we leave the implementation empty.
This is how we create Room Database.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>final</span><span class=w> </span><span class=n>Migration</span><span class=w> </span><span class=n>MIGRATION_1_2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Migration</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>migrate</span><span class=p>(</span><span class=n>SupportSQLiteDatabase</span><span class=w> </span><span class=n>database</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>// Since we didn&#39;t alter the table, there&#39;s nothing else to do here.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//create db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>final</span><span class=w> </span><span class=n>UserDB</span><span class=w> </span><span class=n>userDB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Room</span><span class=p>.</span><span class=na>databaseBuilder</span><span class=p>(</span><span class=k>this</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>,</span><span class=w> </span><span class=n>UserDB</span><span class=p>.</span><span class=na>class</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>,</span><span class=w> </span><span class=s>&#34;userDB&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>addMigrations</span><span class=p>(</span><span class=n>MIGRATION_1_2</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//inserting and accessing data using DAO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//this operations needs to be performed on thread other than main thread</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>userDB</span><span class=p>.</span><span class=na>userDAO</span><span class=p>().</span><span class=na>insertUser</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>User123</span><span class=p>(</span><span class=n>5</span><span class=p>,</span><span class=s>&#34;Wowman&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;888888888&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>userDB</span><span class=p>.</span><span class=na>userDAO</span><span class=p>().</span><span class=na>insertUser</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>User123</span><span class=p>(</span><span class=n>6</span><span class=p>,</span><span class=s>&#34;Captain&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;888888888&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>userDB</span><span class=p>.</span><span class=na>userDAO</span><span class=p>().</span><span class=na>getUsers</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=n>0</span><span class=p>);</span></span></span></code></pre></div><p>And that is pretty much it. We are done with our changes and executing this will migrate our db successfully to room.</p><p>You can get the source code mentioned here on my <a href=https://github.com/amit-bhandari/RoomSamples>Github</a> here.</p><hr><p><strong>But while migrating db, you need to make sure of couple things, otherwise you may face issues.</strong></p><ol><li>You have to make sure column names mentioned in SQLiteHelper class and your POJO class should match, otherwise migration will not be successful.
For e.g. suppose column name for id field of user is ‘user_id’ in SQLite open helper class, either you have to name your id variable in POJO class ‘user_id’ or explicitly mention column name of id field by using @ColumnInfo annotation like this</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@ColumnInfoname</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s>&#34;user_id&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>uId</span><span class=p>;</span></span></span></code></pre></div><ol start=2><li>You have to make sure that table names also matches.
By default, room will assign table name as name of entity class (‘user’ in our case), but we can change this by mentioning table name while annotating entity class like this <em>@Entity( tableName = “users” )</em></li></ol><hr><p>This article was originally written on medium <a href=https://medium.com/@amit-bhandari/migrating-existing-sqlite-implementation-to-room-d05bb8dada7e>here</a></p><hr></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/android/>Android</a></li><li><a href=http://localhost:1313/tags/room/>Room</a></li><li><a href=http://localhost:1313/tags/architecture-components/>Architecture Components</a></li><li><a href=http://localhost:1313/tags/java/>Java</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/image-view-extension/><span class=title>« Prev</span><br><span>Extend Image View to allow URL binding in xml directly</span>
</a><a class=next href=http://localhost:1313/posts/room-android/><span class=title>Next »</span><br><span>Storing Java objects other than primitive types in Room Database</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Amit Bhandari</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>