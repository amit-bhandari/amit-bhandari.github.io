<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Extend Image View to allow URL binding in xml directly | Amit Bhandari</title>
<meta name=keywords content="Android,Image View,Data Binding"><meta name=description content="How to extend image view to allow url binding through XML"><meta name=author content="Amit Bhandari"><link rel=canonical href=http://localhost:1313/posts/image-view-extension/><link crossorigin=anonymous href=/assets/css/stylesheet.6bffd7a4097c0279f26b1781d82b385208248a19c1bd3579693cc195b019686b.css integrity="sha256-a//XpAl8AnnyaxeB2Cs4UggkihnBvTV5aTzBlbAZaGs=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Extend Image View to allow URL binding in xml directly"><meta property="og:description" content="How to extend image view to allow url binding through XML"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/image-view-extension/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-10T12:00:18+05:30"><meta property="article:modified_time" content="2018-04-10T12:00:18+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Extend Image View to allow URL binding in xml directly"><meta name=twitter:description content="How to extend image view to allow url binding through XML"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Extend Image View to allow URL binding in xml directly","item":"http://localhost:1313/posts/image-view-extension/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Extend Image View to allow URL binding in xml directly","name":"Extend Image View to allow URL binding in xml directly","description":"How to extend image view to allow url binding through XML","keywords":["Android","Image View","Data Binding"],"articleBody":"If you are using data binding to bind java pojo to view in Android, you must have came across the issue that you can’t really bind image url in xml directly. Android Image View does not support it by default. But you can easily extend Android Image View to create your own custom view which can support it.\nLets get started.\nFirst of all, to allow your views to pick parameter from xml, resource needs to be declared in attrs.xml in in values resources. Go ahead and create attrs.xml in values directory if it doesn’t exists already and add this one parameter in it.\n","wordCount":"392","inLanguage":"en","datePublished":"2018-04-10T12:00:18+05:30","dateModified":"2018-04-10T12:00:18+05:30","author":{"@type":"Person","name":"Amit Bhandari"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/image-view-extension/"},"publisher":{"@type":"Organization","name":"Amit Bhandari","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Amit Bhandari (Alt + H)">Amit Bhandari</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/archives/ title=Archives><span>Archives</span></a></li><li><a href="https://docs.google.com/document/d/1MORtouBEh73fB4GKWPjOEz4V5QeBQitM_DC_U223agM/edit?usp=sharing" title=Resume><span>Resume</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Extend Image View to allow URL binding in xml directly</h1><div class=post-description>How to extend image view to allow url binding through XML</div><div class=post-meta><span title='2018-04-10 12:00:18 +0530 IST'>April 10, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Amit Bhandari</div></header><div class=post-content><p>If you are using data binding to bind java pojo to view in Android, you must have came across the issue that you can’t really bind image url in xml directly. Android Image View does not support it by default. But you can easily extend Android Image View to create your own custom view which can support it.</p><p>Lets get started.</p><p>First of all, to allow your views to pick parameter from xml, resource needs to be declared in attrs.xml in in values resources. Go ahead and create attrs.xml in values directory if it doesn&rsquo;t exists already and add this one parameter in it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;declare-styleable</span> <span class=na>name=</span><span class=s>&#34;MyImageView&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;attr</span> <span class=na>name=</span><span class=s>&#34;url&#34;</span> <span class=na>format=</span><span class=s>&#34;string&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/declare-styleable&gt;</span></span></span></code></pre></div><p>Now create class MyImageView and extend it from ImageView. Example code below in kotlin, but java counterpart will be pretty much same.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyImageView</span> <span class=p>:</span> <span class=n>ImageView</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>var</span> <span class=py>url</span><span class=p>:</span> <span class=n>String</span> <span class=p>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>set</span><span class=p>(</span><span class=k>value</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=k>field</span> <span class=p>=</span> <span class=k>value</span>
</span></span><span class=line><span class=cl>            <span class=nc>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>).</span><span class=n>load</span><span class=p>(</span><span class=k>value</span><span class=p>).</span><span class=n>into</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>constructor</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Context</span><span class=p>)</span> <span class=p>:</span> <span class=k>super</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>constructor</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Context</span><span class=p>,</span> <span class=n>attrs</span> <span class=p>:</span> <span class=n>AttributeSet</span><span class=p>)</span> <span class=p>:</span> <span class=k>super</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=n>attrs</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>array</span> <span class=p>=</span> <span class=n>context</span><span class=p>.</span><span class=n>obtainStyledAttributes</span><span class=p>(</span><span class=n>attrs</span><span class=p>,</span> <span class=nc>R</span><span class=p>.</span><span class=n>styleable</span><span class=p>.</span><span class=n>MyImageView</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>url</span> <span class=p>=</span> <span class=n>array</span><span class=p>.</span><span class=n>getString</span><span class=p>(</span><span class=nc>R</span><span class=p>.</span><span class=n>styleable</span><span class=p>.</span><span class=n>MyImageView_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>url</span><span class=o>!=</span><span class=k>null</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=nc>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>).</span><span class=n>load</span><span class=p>(</span><span class=n>url</span><span class=p>).</span><span class=n>into</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>array</span><span class=p>.</span><span class=n>recycle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>constructor</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Context</span><span class=p>,</span>  <span class=n>attrs</span><span class=p>:</span> <span class=n>AttributeSet</span> <span class=p>,</span> <span class=n>defStyleAttr</span> <span class=p>:</span> <span class=n>Int</span><span class=p>)</span> <span class=p>:</span> <span class=k>super</span><span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=n>attrs</span><span class=p>,</span> <span class=n>defStyleAttr</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>As noticed in constructor, we are picking up url from xml if provided and setting it as source using Glide. You can use any third party library you want for that matter.</p><p>Now you can use our created custom image view in xml like this.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;our.package.path.MyImageView</span>
</span></span><span class=line><span class=cl>    <span class=na>android:id=</span><span class=s>&#34;@+id/image_view&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>android:layout_width=</span><span class=s>&#34;100dp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>android:layout_height=</span><span class=s>&#34;100dp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>app:url=</span><span class=s>&#34;https://www.famouslogos.net/images/android-logo.jpg&#34;</span><span class=nt>/&gt;</span></span></span></code></pre></div><p>As you can see how easily we can now set url directly from xml for our image view. But hardcoding url like this is not useful at all and we can use data binding to bind variable directly to url of image view.</p><p>If you have no idea what data binding is, I suggest you to go through this and this. It is awesome by the way.</p><p>Now our xml looks like this where pojo is your pojo variable name.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;our.package.path.MyImageView</span>
</span></span><span class=line><span class=cl>    <span class=na>android:id=</span><span class=s>&#34;@+id/image_view&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>android:layout_width=</span><span class=s>&#34;100dp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>android:layout_height=</span><span class=s>&#34;100dp&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>app:url=</span><span class=s>&#34;@{pojo.invoiceLogoLink}&#34;</span><span class=nt>/&gt;</span></span></span></code></pre></div><p>If you are wondering how we manage the scenario where this parameter is changes at runtime, you can see setter for url variable like this in kotlin class,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>var</span> <span class=py>url</span><span class=p>:</span> <span class=n>String</span> <span class=p>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>set</span><span class=p>(</span><span class=k>value</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>field</span> <span class=p>=</span> <span class=k>value</span>
</span></span><span class=line><span class=cl>        <span class=nc>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>).</span><span class=n>load</span><span class=p>(</span><span class=k>value</span><span class=p>).</span><span class=n>into</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div><p>Every time value changes in pojo, setter is invoked and we change the image using Glide.</p><p>Clap if you like what you read.</p><hr><p>This article was originally written on medium <a href=https://medium.com/@amit-bhandari/extend-image-view-to-allow-url-binding-in-xml-directly-c6d9211f717d>here</a></p><hr></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/android/>Android</a></li><li><a href=http://localhost:1313/tags/image-view/>Image View</a></li><li><a href=http://localhost:1313/tags/data-binding/>Data Binding</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/android-ci-cd/><span class=title>« Prev</span><br><span>Android Continuous Integration and Delivery — Next level Android development</span>
</a><a class=next href=http://localhost:1313/posts/sqlite-room-migration/><span class=title>Next »</span><br><span>Migrating existing SQLite implementation to Room</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Amit Bhandari</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>